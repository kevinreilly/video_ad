<html>
	<head>
		<style>
			button[selected]{
				background: black;
				color: white;
			}
		</style>
	</head>
	<body>
		<script>
			const toggleAD = (toggleButton) => {
				const video = document.getElementById('the_video');
				const descriptionTrack = video.textTracks[0];

				const adOff = () => {
					toggleButton.removeAttribute('selected');
					descriptionTrack.mode = 'disabled';
				}

				const adOn = () => {
					toggleButton.setAttribute('selected', '');

					const synth = window.speechSynthesis;

					descriptionTrack.mode = 'showing';

					descriptionTrack.oncuechange = () => {
						if (descriptionTrack.activeCues.length > 0) {
							let utterThis = new SpeechSynthesisUtterance(descriptionTrack.activeCues[0].text);
							utterThis.voice = synth.getVoices()[1];

							video.pause();

							synth.speak(utterThis);

							utterThis.onend = () => video.play();
						}
					}
				}

				toggleButton.hasAttribute('selected') ? adOff() : adOn();
			}
		</script>
		<video id="the_video" controls>
			<source src="https://www.w3schools.com/html/mov_bbb.mp4" />
			<track src="./ad.vtt" label="English" srclang="en" kind="descriptions" />
		</video>
		<div>
			<button onclick="toggleAD(this)">
				AD
			</button>
		</div>
	</body>
</html>
